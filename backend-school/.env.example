# Backend-School Configuration

# Server Configuration
PORT=8081
HOST=0.0.0.0
RUST_LOG=info

# Admin Database (for school mapping)
# This is the backend-admin database URL
ADMIN_DATABASE_URL=postgresql://user:password@neon-host/schoolorbit_admin?sslmode=require

# Internal API Secret (shared with backend-admin)
INTERNAL_API_SECRET=your-internal-secret-change-this-in-production

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Auto-Register Menu System
# Must match VITE_DEPLOY_KEY in frontend
DEPLOY_KEY=local-dev-key-change-me-in-production

# Data Encryption Key (AES-256)
# Generate with: openssl rand -base64 32
# CRITICAL: Keep this backed up securely - without it, encrypted data cannot be recovered
ENCRYPTION_KEY=your-encryption-key-change-me-32-chars-minimum

# Cloudflare R2 / S3-Compatible Storage Configuration
# Get these from: Cloudflare Dashboard > R2 > Manage R2 API Tokens
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=schoolorbit-files
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev
R2_REGION=auto

# Optional: CDN Configuration (for better performance)
# If you setup Cloudflare CDN in front of R2
# CDN_URL=https://cdn.schoolorbit.app

# File Upload Limits (in MB)
MAX_FILE_SIZE_MB=10
MAX_PROFILE_IMAGE_SIZE_MB=5
MAX_DOCUMENT_SIZE_MB=20

# Allowed File Types (comma-separated)
ALLOWED_IMAGE_TYPES=jpg,jpeg,png,webp,gif
ALLOWED_DOCUMENT_TYPES=pdf,doc,docx,xls,xlsx

# Note: Individual school databases are not configured here
# Each school's database URL is retrieved dynamically from backend-admin database
# based on the subdomain in the request header (X-School-Subdomain)
