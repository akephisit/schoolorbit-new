# =============================================================================
# SchoolOrbit Docker Compose Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# This file is used by docker-compose.yml
# =============================================================================

# -----------------------------------------------------------------------------
# Security Keys (REQUIRED - Change in Production!)
# -----------------------------------------------------------------------------
ENCRYPTION_KEY=change-this-encryption-key-minimum-32-characters-long
DEPLOY_KEY=local-dev-key-change-me-in-production

# -----------------------------------------------------------------------------
# Cloudflare R2 Configuration (REQUIRED for file uploads)
# -----------------------------------------------------------------------------
# Get from: https://dash.cloudflare.com > R2 > Manage R2 API Tokens

R2_ACCOUNT_ID=your-r2-account-id
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key
R2_BUCKET_NAME=schoolorbit-files
R2_PUBLIC_URL=https://pub-xxxxx.r2.dev
R2_REGION=auto

# -----------------------------------------------------------------------------
# Optional: CDN Configuration
# -----------------------------------------------------------------------------
# If you have Cloudflare CDN configured, set this for better performance
# CDN_URL=https://cdn.schoolorbit.app

# -----------------------------------------------------------------------------
# File Upload Limits (Optional - defaults shown)
# -----------------------------------------------------------------------------
MAX_FILE_SIZE_MB=10
MAX_PROFILE_IMAGE_SIZE_MB=5
MAX_DOCUMENT_SIZE_MB=20

# -----------------------------------------------------------------------------
# Allowed File Types (Optional - defaults shown)
# -----------------------------------------------------------------------------
ALLOWED_IMAGE_TYPES=jpg,jpeg,png,webp,gif
ALLOWED_DOCUMENT_TYPES=pdf,doc,docx,xls,xlsx

# =============================================================================
# Setup Instructions
# =============================================================================
#
# 1. Copy this file:
#    cp .env.example .env
#
# 2. Get R2 Credentials:
#    - Go to https://dash.cloudflare.com
#    - Navigate to R2 > Manage R2 API Tokens
#    - Create API Token with Object Read & Write permissions
#    - Copy Account ID, Access Key ID, and Secret Access Key
#
# 3. Create R2 Bucket:
#    - Go to R2 > Create Bucket
#    - Name: schoolorbit-files
#    - Enable "Allow Access" for public files
#    - Copy the public URL (e.g., https://pub-xxxxx.r2.dev)
#
# 4. Fill in your .env file with the credentials above
#
# 5. Start services:
#    docker-compose up -d
#
# =============================================================================
# Testing R2 Connection
# =============================================================================
#
# Option 1: Use setup script (inside backend-school container)
#   docker-compose exec backend-school /bin/sh
#   chmod +x scripts/setup_r2.sh
#   ./scripts/setup_r2.sh
#
# Option 2: Manual test with AWS CLI
#   aws s3 ls s3://schoolorbit-files \
#     --endpoint-url https://{account-id}.r2.cloudflarestorage.com
#
# =============================================================================
