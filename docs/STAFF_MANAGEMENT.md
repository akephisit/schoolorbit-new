# üéì ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£ (Staff Management System)

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: 20 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2567  
‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: **‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå (MVP)**

---

## üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡πÅ‡∏ö‡∏ö‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Multi-Role ‡πÅ‡∏•‡∏∞ Multi-Department ‡∏û‡∏£‡πâ‡∏≠‡∏° Permission System ‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô

### ‚ú® ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

- **Multi-Role Support**: ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ñ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏£‡∏π + ‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡πà‡∏≤‡∏¢ + ‡∏ò‡∏∏‡∏£‡∏Å‡∏≤‡∏£)
- **Multi-Department**: ‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î‡∏´‡∏•‡∏≤‡∏¢‡∏ù‡πà‡∏≤‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ù‡πà‡∏≤‡∏¢
- **Permission-based**: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏≤‡∏° Role
- **Teaching Assignments**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏≠‡∏°
- **Historical Data**: ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡∏£‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (started_at/ended_at)

---

## üóÑÔ∏è Database Schema

### Core Tables

#### 1. **users** (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô)
```sql
- id (UUID)
- national_id (‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏ä‡∏ä.)
- email
- password_hash
- first_name, last_name, nickname
- user_type ('student', 'staff', 'parent')
- title (‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤)
- phone, emergency_contact, line_id
- date_of_birth, gender, address
- status ('active', 'inactive', 'suspended', 'resigned', 'retired')
- hired_date, resigned_date
- metadata (JSONB)
```

#### 2. **roles** (‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó/‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö)
```sql
- id (UUID)
- code (‡∏£‡∏´‡∏±‡∏™ ‡πÄ‡∏ä‡πà‡∏ô 'TEACHER', 'DIRECTOR')
- name (‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
- name_en (‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©)
- category ('administrative', 'teaching', 'operational', 'support')
- level (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏≥‡∏ô‡∏≤‡∏à 0-999)
- permissions (JSONB array)
- is_active
```

**Default Roles:**
- `TEACHER` (‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô) - level 10
- `DEPT_HEAD` (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡πà‡∏≤‡∏¢) - level 50
- `VICE_DIRECTOR` (‡∏£‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£) - level 80
- `DIRECTOR` (‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£) - level 100
- `SECRETARY` (‡∏ò‡∏∏‡∏£‡∏Å‡∏≤‡∏£) - level 20
- `LIBRARIAN` (‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå) - level 15
- `ADMIN` (‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö) - level 999

#### 3. **user_roles** (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå User-Role)
```sql
- id (UUID)
- user_id ‚Üí users
- role_id ‚Üí roles
- is_primary (‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏´‡∏•‡∏±‡∏Å)
- started_at, ended_at
- notes
```

#### 4. **departments** (‡∏ù‡πà‡∏≤‡∏¢/‡πÅ‡∏ú‡∏ô‡∏Å)
```sql
- id (UUID)
- code (‡∏£‡∏´‡∏±‡∏™ ‡πÄ‡∏ä‡πà‡∏ô 'ACADEMIC')
- name (‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
- name_en (‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©)
- parent_department_id (‡∏ù‡πà‡∏≤‡∏¢‡πÅ‡∏°‡πà)
- phone, email, location
- is_active
- display_order
```

**Default Departments:**
- `ACADEMIC` (‡∏ù‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£)
- `STUDENT_AFFAIRS` (‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)
- `ADMINISTRATION` (‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)
- `FINANCE` (‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô)
- `LIBRARY` (‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î)

#### 5. **department_members** (‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢)
```sql
- id (UUID)
- user_id ‚Üí users
- department_id ‚Üí departments
- position ('head', 'deputy_head', 'member', 'coordinator')
- is_primary_department
- responsibilities (‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö)
- started_at, ended_at
```

#### 6. **teaching_assignments** (‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô)
```sql
- id (UUID)
- teacher_id ‚Üí users
- class_id ‚Üí classes
- subject (‡∏ß‡∏¥‡∏ä‡∏≤)
- grade_level (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô)
- hours_per_week
- teacher_type ('main_teacher', 'co_teacher', 'substitute')
- is_homeroom_teacher
- academic_year, semester
- started_at, ended_at
```

#### 7. **staff_info** (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£)
```sql
- id (UUID)
- user_id ‚Üí users
- employee_id (‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô)
- employment_type ('permanent', 'contract', 'temporary', 'part_time')
- education_level (‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤)
- major (‡∏™‡∏≤‡∏Ç‡∏≤), university
- teaching_license_number, teaching_license_expiry
- salary, bank_account, bank_name
- tax_id, social_security_id
- work_days (JSONB array)
- work_hours_start, work_hours_end
```

#### 8. **student_info** (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)
```sql
- id (UUID)
- user_id ‚Üí users
- student_id (‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)
- grade_level, class_room, student_number
- parent_id ‚Üí users
- enrollment_date, expected_graduation_date
- blood_type, allergies, medical_conditions
```

#### 9. **parent_info** (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á)
```sql
- id (UUID)
- user_id ‚Üí users
- relationship ('father', 'mother', 'guardian')
- occupation, workplace, work_phone
- monthly_income
```

#### 10. **permissions** (‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
```sql
- id (UUID)
- code (‡πÄ‡∏ä‡πà‡∏ô 'users.create', 'documents.approve')
- name (‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
- module (‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà)
- action ('view', 'create', 'edit', 'delete', 'approve')
```

---

## üîå Backend APIs

### Base URL
```
http://localhost:8081
```

### Authentication
‡∏ó‡∏∏‡∏Å API ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà cookie `auth_token` (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô login)

### Staff Management APIs

#### 1. List Staff
```http
GET /api/staff?search={query}&status={status}&page={n}&page_size={n}
```

**Response:**
```json
{
  "success": true,
  "data": [
    {
      "id": "uuid",
      "employee_id": "EMP001",
      "first_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢",
      "last_name": "‡πÉ‡∏à‡∏î‡∏µ",
      "roles": ["‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô"],
      "departments": ["‡∏ù‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£"],
      "status": "active"
    }
  ],
  "total": 100,
  "page": 1,
  "page_size": 20,
  "total_pages": 5
}
```

#### 2. Get Staff Profile
```http
GET /api/staff/{id}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "id": "uuid",
    "national_id": "1234567890123",
    "email": "somchai@school.com",
    "title": "‡∏ô‡∏≤‡∏¢",
    "first_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢",
    "last_name": "‡πÉ‡∏à‡∏î‡∏µ",
    "nickname": "‡πÇ‡∏à‡πâ",
    "phone": "081-234-5678",
    "user_type": "staff",
    "status": "active",
    "staff_info": {
      "employee_id": "EMP001",
      "employment_type": "permanent",
      "education_level": "‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÇ‡∏ó",
      "major": "‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏®‡∏∂‡∏Å‡∏©‡∏≤",
      "university": "‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà"
    },
    "roles": [
      {
        "id": "uuid",
        "code": "TEACHER",
        "name": "‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô",
        "category": "teaching",
        "level": 10,
        "is_primary": true
      },
      {
        "id": "uuid",
        "code": "DEPT_HEAD",
        "name": "‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡πà‡∏≤‡∏¢",
        "category": "administrative",
        "level": 50,
        "is_primary": false
      }
    ],
    "departments": [
      {
        "id": "uuid",
        "code": "ACADEMIC",
        "name": "‡∏ù‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£",
        "position": "head",
        "is_primary_department": true
      }
    ],
    "teaching_assignments": [
      {
        "id": "uuid",
        "subject": "‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
        "grade_level": "‡∏°.1",
        "class_code": "M1-1",
        "class_name": "‡∏°.1/1",
        "is_homeroom_teacher": true,
        "hours_per_week": 5,
        "academic_year": "2567",
        "semester": "1"
      }
    ],
    "permissions": [
      "users.view",
      "grades.edit",
      "attendance.mark",
      "documents.approve_dept"
    ]
  }
}
```

#### 3. Create Staff
```http
POST /api/staff
Content-Type: application/json

{
  "national_id": "1234567890123",
  "email": "somchai@school.com",
  "password": "Password123!",
  "title": "‡∏ô‡∏≤‡∏¢",
  "first_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢",
  "last_name": "‡πÉ‡∏à‡∏î‡∏µ",
  "nickname": "‡πÇ‡∏à‡πâ",
  "phone": "081-234-5678",
  "hired_date": "2024-01-01",
  "staff_info": {
    "employee_id": "EMP001",
    "employment_type": "permanent",
    "education_level": "‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡πÇ‡∏ó",
    "major": "‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏®‡∏∂‡∏Å‡∏©‡∏≤",
    "university": "‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà"
  },
  "role_ids": ["uuid-role-teacher", "uuid-role-dept-head"],
  "primary_role_id": "uuid-role-teacher",
  "department_assignments": [
    {
      "department_id": "uuid-dept-academic",
      "position": "head",
      "is_primary": true,
      "responsibilities": "‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£"
    }
  ]
}
```

**Response:**
```json
{
  "success": true,
  "message": "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
  "data": {
    "id": "uuid"
  }
}
```

#### 4. Update Staff
```http
PUT /api/staff/{id}
Content-Type: application/json

{
  "title": "‡∏î‡∏£.",
  "first_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢",
  "last_name": "‡πÉ‡∏à‡∏î‡∏µ",
  "phone": "081-234-5678"
}
```

#### 5. Delete Staff (Soft Delete)
```http
DELETE /api/staff/{id}
```

**Response:**
```json
{
  "success": true,
  "message": "‡∏•‡∏ö‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"
}
```

### Role Management APIs

#### 1. List Roles
```http
GET /api/roles
```

#### 2. Get Role
```http
GET /api/roles/{id}
```

#### 3. Create Role
```http
POST /api/roles
Content-Type: application/json

{
  "code": "LIBRARIAN",
  "name": "‡∏ö‡∏£‡∏£‡∏ì‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå",
  "name_en": "Librarian",
  "description": "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î",
  "category": "operational",
  "level": 15,
  "permissions": ["library.manage", "users.view"]
}
```

#### 4. Update Role
```http
PUT /api/roles/{id}
```

### Department Management APIs

#### 1. List Departments
```http
GET /api/departments
```

#### 2. Get Department
```http
GET /api/departments/{id}
```

#### 3. Create Department
```http
POST /api/departments
Content-Type: application/json

{
  "code": "IT",
  "name": "‡∏ù‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®",
  "name_en": "IT Department",
  "description": "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå",
  "phone": "053-123456",
  "email": "it@school.ac.th",
  "location": "‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 2 ‡∏ä‡∏±‡πâ‡∏ô 1"
}
```

#### 4. Update Department
```http
PUT /api/departments/{id}
```

---

## üé® Frontend Pages

### 1. Staff List Page
**Path:** `/staff`

**Features:**
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- ‚úÖ Search (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠, ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•, ‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô)
- ‚úÖ Pagination
- ‚úÖ Status badge (active/inactive)
- ‚úÖ Quick actions (View, Edit, Delete)
- ‚úÖ Responsive design

**Screenshot:** (‡∏£‡∏≠ capture)

### 2. Staff Profile Page
**Path:** `/staff/{id}`

**Features:**
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÅ‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡∏û‡∏£‡πâ‡∏≠‡∏° badge ‡∏´‡∏•‡∏±‡∏Å)
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î (‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡∏ù‡πà‡∏≤‡∏¢)
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏π)
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- ‚úÖ Edit button

**Screenshot:** (‡∏£‡∏≠ capture)

### 3. Staff Create/Edit Form
**Path:** `/staff/new`, `/staff/{id}/edit`

**Status:** üöß To be implemented

**Features (Planned):**
- Multi-step form wizard
- Role selection (multi-select)
- Department assignment
- Teaching assignment (for teachers)
- Form validation
- Auto-complete fields

---

## üìÅ File Structure

### Backend (Rust)
```
backend-school/
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ 005_create_staff_management.sql
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ staff.rs       # Staff CRUD handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ roles.rs       # Role & Department handlers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ staff.rs       # All models & types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mod.rs
‚îÇ   ‚îî‚îÄ‚îÄ main.rs            # Routes configuration
```

### Frontend (SvelteKit)
```
frontend-school/
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ lib/
    ‚îÇ   ‚îî‚îÄ‚îÄ api/
    ‚îÇ       ‚îî‚îÄ‚îÄ staff.ts           # API client
    ‚îî‚îÄ‚îÄ routes/
        ‚îî‚îÄ‚îÄ (app)/
            ‚îî‚îÄ‚îÄ staff/
                ‚îú‚îÄ‚îÄ +page.svelte       #  List page
                ‚îî‚îÄ‚îÄ [id]/
                    ‚îî‚îÄ‚îÄ +page.svelte   # Profile page
```

---

## üîÑ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Use Cases)

### Use Case 1: ‡∏Ñ‡∏£‡∏π‡∏™‡∏°‡∏ä‡∏≤‡∏¢ - ‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô + ‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ + ‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:**
```
users:
  - ‡∏ä‡∏∑‡πà‡∏≠: ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ
  - ‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: EMP001
  - user_type: staff

user_roles:
  - TEACHER (primary)
  - DEPT_HEAD

department_members:
  - ‡∏ù‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡πà‡∏≤‡∏¢, primary)

teaching_assignments:
  - ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏°.1/1 (‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤)
 - ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏°.1/2
```

**Permissions:**
- users.view, users.edit
- students.view
- grades.view, grades.edit
- attendance.mark
- documents.approve_dept

---

### Use Case 2: ‡∏Ñ‡∏£‡∏π‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á - ‡∏Ñ‡∏£‡∏π‡∏™‡∏≠‡∏ô + ‡∏ò‡∏∏‡∏£‡∏Å‡∏≤‡∏£ + ‡∏£‡∏≠‡∏á‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:**
```
user_roles:
  - TEACHER (primary)
  - SECRETARY
  - LIBRARIAN

department_members:
  - ‡∏ù‡πà‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ (member)
  - ‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (member)
  - ‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏°‡∏∏‡∏î (deputy_head)

teaching_assignments:
  - ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‡∏°.2/1
```

---

### Use Case 3: ‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£ - ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ + ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ + ‡∏™‡∏≠‡∏ô (‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á)

**‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:**
```
user_roles:
  - DIRECTOR (primary, level 100)
  - TEACHER

department_members:
  - ‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (head)

teaching_assignments:
  - ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏°.6 (co_teacher)

Permissions:
  - users.* (all)
  - documents.approve
  - finance.approve
  - ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
```

---

## üöÄ ‡∏Å‡∏≤‡∏£ Deploy

### Prerequisites
1. PostgreSQL 14+
2. Rust 1.70+
3. Node.js 18+

### Backend Setup
```bash
cd backend-school

# Set environment variables
cp .env.example .env
# ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç DATABASE_URL

# Run migrations
sqlx migrate run

# Build & Run
cargo run --release
```

**Server ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà:** `http://localhost:8081`

### Frontend Setup
```bash
cd frontend-school

# Install dependencies
npm install

# Set environment variables
echo "VITE_API_URL=http://localhost:8081" > .env

# Run dev server
npm run dev
```

**UI ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà:** `http://localhost:5173`

---

## ‚úÖ Checklist

### Backend
- [x] Database migration (005_create_staff_management.sql)
- [x] Models & Types (staff.rs)
- [x] Staff CRUD handlers
- [x] Role CRUD handlers
- [x] Department CRUD handlers
- [x] API routes configuration
- [x] Compile successfully
- [x] No SQL injection vulnerabilities (using bind parameters)

### Frontend
- [x] API client (staff.ts)
- [x] Staff List UI
- [x] Staff Profile UI
- [x] Sidebar navigation
- [x] TypeScript types
- [x] svelte-check pass
- [ ] Staff Create/Edit form (TODO)
- [ ] Role management UI (TODO)
- [ ] Department management UI (TODO)

---

## üéØ Next Steps (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

### Phase 1: ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‚úÖ
- [x] Database design
- [x] Backend APIs (Staff, Role, Department)
- [x] Frontend List & Profile pages

### Phase 2: ‡∏ï‡πà‡∏≠‡πÑ‡∏õ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
1. **Create/Edit Staff Form**
   - Multi-step wizard
   - Role & Department selector
   - Teaching assignment builder
   - Form validation

2. **Permission Middleware**
   - Check permissions from user's roles
   - Protect API endpoints
   - Frontend permission-based UI

3. **Testing**
   - Unit tests (Rust)
   - Integration tests (API)
   - E2E tests (Frontend)

### Phase 3: Enhancement
1. **Advanced Features**
   - Bulk import (CSV/Excel)
   - Export to PDF
   - Advanced search & filters
   - Staff analytics dashboard

2. **Document Management Integration**
   - Workflow approval system
   - Document routing based on roles/departments

3. **Performance**
   - Add database indexes
   - Implement caching
   - Optimize queries

---

## üêõ Known Issues & Limitations

1. **Frontend Form ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ** - ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
2. **Permission Checking ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ** - Backend ‡∏°‡∏µ permissions ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ enforce
3. **File Upload ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ** - ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û profile ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ implement
4. **Audit Log ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ** - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
5. **Soft Delete Only** - ‡πÑ‡∏°‡πà‡∏°‡∏µ hard delete (‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥)

---

## üìö References

- [Rust Axum Documentation](https://docs.rs/axum)
- [SQLx Documentation](https://docs.rs/sqlx)
- [SvelteKit Documentation](https://kit.svelte.dev)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)

---

## üë• Contributors

- **Your Name** - Initial work

---

## üìÑ License

Proprietary - SchoolOrbit Project

---

**Last Updated:** 20 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2567  
**Version:** 1.0.0
